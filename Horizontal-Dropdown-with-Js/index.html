<!doctype html>
<html>
<head>
  <title>Horizontal Dropdown Menu -- Responsive Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="normalize.css">
  <link rel="stylesheet" href="styles.css">
  <script src="lodash.js"></script>
</head>
<body>
  <ul class="menu">
    <li>
      <h3>Productssss</h3>
      <div class="submenu">
        <h4>Learning &amp; Games</h4>
        <ul>
          <li>Catch the Bullet</li>
          <li>Snoopydoo</li>
          <li>Fallen Angel</li>
          <li>Sui Maker</li>
          <li>Wave Master</li>
          <li>Golf Pro</li>
        </ul>
        <h4>Utilities</h4>
        <ul>
          <li>Gadget Finder</li>
          <li>Green Tree Express</li>
          <li>Green Tree Pro</li>
          <li>Wobbler 3.0</li>
          <li>Coolkid</li>
        </ul>
        <h4>Education</h4>
        <ul>
          <li>Learn Thai</li>
          <li>Math Genius</li>
          <li>Chemokid</li>
        </ul>
        <h4>Professionals</h4>
        <ul>
          <li>Success 1.0</li>
          <li>Moneymaker</li>
        </ul>
      </div>
    </li><!-- END Products -->

    <li>
      <h3>Downloads</h3>
      <div class="submenu">
        <h4>Education &amp; Learning</h4>
        <ul>
          <li>Learn Thai</li>
          <li>Math Genius</li>
          <li>Chemokid</li>
        </ul>
        <h4>Professionals</h4>
        <ul>
          <li>Success 1.0</li>
          <li>Moneymaker</li>
        </ul>
        <h4>Entertainment</h4>
        <ul>
          <li>Gadget Finder</li>
          <li>Green Tree Express</li>
          <li>Green Tree Pro</li>
          <li>Holy Cannoli</li>
          <li>Wobbler 3.0</li>
          <li>Coolkid</li>
        </ul>
        <h4>Games</h4>
        <ul>
          <li>Catch the Bullet</li>
          <li>Snoopydoo</li>
          <li>Fallen Angel</li>
          <li>Sui Maker</li>
          <li>Wave Master</li>
          <li>Golf Pro</li>
        </ul>
      </div> <!-- .submenu -->
    </li><!-- END Downloads -->

    <li>
      <h3> Applications</h3>
      <div class="submenu">
        <h4>Learning &amp; Games</h4>
        <ul>
          <li>Catch the Bullet</li>
          <li>Snoopydoo</li>
        </ul>
        <h4>Utilities</h4>
        <ul>
          <li>Gadget Finder</li>
          <li>Green Tree Express</li>
          <li>Green Tree Pro</li>
          <li>Wobbler 3.0</li>
          <li>Coolkid</li>
        </ul>
        <h4>Education</h4>
        <ul>
          <li>Learn Thai</li>
          <li>Math Genius</li>
        </ul>
        <h4>Professionals</h4>
        <ul>
          <li>Success 1.0</li>
          <li>Moneymaker</li>
        </ul>
      </div> <!-- .submenu -->
    </li><!-- END Applications -->

    <li>
      <h3>Projects</h3>
      <div class="submenu">
      <h4>Learning &amp; Games</h4>
      <ul>
        <li>Catch the Bullet</li>
        <li>Snoopydoo</li>
        <li>Fallen Angel</li>
        <li>Sui Maker</li>
        <li>Wave Master</li>
        <li>Golf Pro</li>
      </ul>
      <h4>Utilities</h4>
      <ul>
        <li>Gadget Finder</li>
        <li>Green Tree Express</li>
      </ul>
      <h4>Entertainment</h4>
      <ul>
        <li>Gadget Finder</li>
        <li>Green Tree Express</li>
        <li>Green Tree Pro</li>
        <li>Holy Cannoli</li>
        <li>Wobbler 3.0</li>
        <li>Coolkid</li>
      </ul>
    </div>
    </li><!-- END Projects -->

    <li>
      <h3>Freeware</h3>
      <div class="submenu">
        <h4>Utilities</h4>
        <ul>
          <li>Green Tree Pro</li>
          <li>Wobbler 3.0</li>
          <li>Coolkid</li>
        </ul>
        <h4>Education</h4>
        <ul>
          <li>Learn Thai</li>
          <li>Math Genius</li>
        </ul>
        <h4>Professionals</h4>
        <ul>
          <li>Success 1.0</li>
          <li>Monsymaker</li>
        </ul>
        <h4>Learning &amp; Games</h4>
        <ul>
          <li>Catch the Bullet</li>
          <li>Snoopydoo</li>
          <li>Fallen Angel</li>
          <li>Sui Makerr</li>
          <li>Wave Master</li>
          <li>Golf Pro</li>
        </ul>
      </div>
    </li><!-- END Freeware -->
  </ul>

  <script>
  var navItems = document.getElementsByTagName('h3'); // ok
  var clickNavItem;

/**
 * If "this" `navItem` is "closed", make it "open"; if "this" `navItem` is "open"
 * make it "closed". If other `navItems` are "open" then close them, too.
 *
 * @todo FIX THIS FUNCTION!
 *
 * @param DOMEvent event
 * @return undefined
 */
function clickNavItem(event){
  // if "this" navItem is "closed"...
  if ( this.parentElement.className !== 'open' ){
    makeEverythingClosed(navItems);
    makeItOpen(this.parentElement);
  // otherwise if "this" navItem is "open"
  } else if ( this.parentElement.className === 'open' ){
    makeItClosed(this.parentElement);
  }
}; // END clickNavItem



  // for each navItem
  _.each(navItems, function(navItem) {
    // attach the event handler...
    navItem.onclick = clickNavItem; // ok
    console.log('nav items are now clickable'); // ok
  });


  /**
   * @param HTMLElement element
   * @return Boolean if `element` is "open"
   */
  function isOpen(element){
  }
  /**
   * @param HTMLElement element
   * @return Boolean if `element` is "closed"
   */
  function isClosed(element){

  }

  // Generic functions
  function makeItOpen (element) {
    element.className = 'open';
  }

  function makeItClosed(element){
    element.className = '';
  }

  function makeEverythingClosed(elements){
  // for every element in elements
    _.each(elements, function(element) {
      // remove open classes
      element.parentElement.className = '';
    });
  }
  </script>
</body>
</html>